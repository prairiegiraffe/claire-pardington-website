---
import Layout from '~/layouts/PageLayout.astro';
import FlipBookTurnJS from '~/components/widgets/FlipBookTurnJS.astro';

import coverImage from '~/assets/images/SE DÉSHABILLER/SE DÉSHABILLER Cover.webp';
import definitionImage from '~/assets/images/SE DÉSHABILLER/02-First-Section_DEFINITION.webp';
import page12 from '~/assets/images/SE DÉSHABILLER/Page-1-and-2.webp';
import page34 from '~/assets/images/SE DÉSHABILLER/Page-3-and-4.webp';
import flatFinal01 from '~/assets/images/SE DÉSHABILLER/deshabiller-finals/01 Flat Final_Cover.webp';
import flatFinal02 from '~/assets/images/SE DÉSHABILLER/deshabiller-finals/02 Flat Final_All swatches.webp';
import flatFinal03 from '~/assets/images/SE DÉSHABILLER/deshabiller-finals/03 Flat Final_Shirts.webp';
import flatFinal04 from '~/assets/images/SE DÉSHABILLER/deshabiller-finals/04 Flat Final_Jackets .webp';
import flatFinal05 from '~/assets/images/SE DÉSHABILLER/deshabiller-finals/05 Flat Final_pants and dresses.webp';

// Import Journal images
import journal01 from '~/assets/images/SE DÉSHABILLER/Journal/01.webp';
import journal02 from '~/assets/images/SE DÉSHABILLER/Journal/02.webp';
import journal03 from '~/assets/images/SE DÉSHABILLER/Journal/03.webp';
import journal04 from '~/assets/images/SE DÉSHABILLER/Journal/04.webp';
import journal05 from '~/assets/images/SE DÉSHABILLER/Journal/05.webp';
import journal06 from '~/assets/images/SE DÉSHABILLER/Journal/06.webp';
import journal07 from '~/assets/images/SE DÉSHABILLER/Journal/07.webp';
import journal08 from '~/assets/images/SE DÉSHABILLER/Journal/08.webp';
import journal09 from '~/assets/images/SE DÉSHABILLER/Journal/09.webp';
import journal10 from '~/assets/images/SE DÉSHABILLER/Journal/10.webp';
import journal11 from '~/assets/images/SE DÉSHABILLER/Journal/11.webp';
import journal12 from '~/assets/images/SE DÉSHABILLER/Journal/12.webp';
import journal13 from '~/assets/images/SE DÉSHABILLER/Journal/13.webp';
import journal14 from '~/assets/images/SE DÉSHABILLER/Journal/14.webp';
import journal15 from '~/assets/images/SE DÉSHABILLER/Journal/15.webp';
import journal16 from '~/assets/images/SE DÉSHABILLER/Journal/16.webp';
import journal17 from '~/assets/images/SE DÉSHABILLER/Journal/17.webp';
import journal18 from '~/assets/images/SE DÉSHABILLER/Journal/18.webp';
import journal19 from '~/assets/images/SE DÉSHABILLER/Journal/19.webp';
import journal20 from '~/assets/images/SE DÉSHABILLER/Journal/20.webp';
import journal21 from '~/assets/images/SE DÉSHABILLER/Journal/21.webp';
import journal22 from '~/assets/images/SE DÉSHABILLER/Journal/22.webp';
import journal23 from '~/assets/images/SE DÉSHABILLER/Journal/23.webp';
import journal24 from '~/assets/images/SE DÉSHABILLER/Journal/24.webp';
import journal25 from '~/assets/images/SE DÉSHABILLER/Journal/25.webp';
import journal26 from '~/assets/images/SE DÉSHABILLER/Journal/26.webp';
import journal27 from '~/assets/images/SE DÉSHABILLER/Journal/27.webp';
import journal28 from '~/assets/images/SE DÉSHABILLER/Journal/28.webp';
import journal29 from '~/assets/images/SE DÉSHABILLER/Journal/29.webp';
import journal30 from '~/assets/images/SE DÉSHABILLER/Journal/30.webp';
import journal31 from '~/assets/images/SE DÉSHABILLER/Journal/31.webp';
import journal32 from '~/assets/images/SE DÉSHABILLER/Journal/32.webp';
import journal33 from '~/assets/images/SE DÉSHABILLER/Journal/33.webp';
import journal34 from '~/assets/images/SE DÉSHABILLER/Journal/34.webp';
import journal35 from '~/assets/images/SE DÉSHABILLER/Journal/35.webp';
import journal36 from '~/assets/images/SE DÉSHABILLER/Journal/36.webp';
import journal37 from '~/assets/images/SE DÉSHABILLER/Journal/37.webp';
import journal38 from '~/assets/images/SE DÉSHABILLER/Journal/38.webp';
import journal39 from '~/assets/images/SE DÉSHABILLER/Journal/39.webp';
import journal40 from '~/assets/images/SE DÉSHABILLER/Journal/40.webp';
import journal41 from '~/assets/images/SE DÉSHABILLER/Journal/41.webp';
import journal42 from '~/assets/images/SE DÉSHABILLER/Journal/42.webp';
import journal43 from '~/assets/images/SE DÉSHABILLER/Journal/43.webp';
import journal44 from '~/assets/images/SE DÉSHABILLER/Journal/44.webp';
import journal45 from '~/assets/images/SE DÉSHABILLER/Journal/45.webp';
import journal46 from '~/assets/images/SE DÉSHABILLER/Journal/46.webp';
import journal47 from '~/assets/images/SE DÉSHABILLER/Journal/47.webp';
import journal48 from '~/assets/images/SE DÉSHABILLER/Journal/48.webp';
import journal49 from '~/assets/images/SE DÉSHABILLER/Journal/49.webp';
import journal50 from '~/assets/images/SE DÉSHABILLER/Journal/50.webp';
import journal51 from '~/assets/images/SE DÉSHABILLER/Journal/51.webp';
import journal52 from '~/assets/images/SE DÉSHABILLER/Journal/52.webp';
import journal53 from '~/assets/images/SE DÉSHABILLER/Journal/53.webp';
import journal54 from '~/assets/images/SE DÉSHABILLER/Journal/54.webp';
import journal55 from '~/assets/images/SE DÉSHABILLER/Journal/55.webp';
import journal56 from '~/assets/images/SE DÉSHABILLER/Journal/56.webp';
import journal57 from '~/assets/images/SE DÉSHABILLER/Journal/57.webp';
import journal58 from '~/assets/images/SE DÉSHABILLER/Journal/58.webp';

// Import concept images for flipbook
import concept01 from '~/assets/images/SE DÉSHABILLER/concept/01 Portfolio cover.webp';
import concept02 from '~/assets/images/SE DÉSHABILLER/concept/02 First Section_DEFINITION.webp';
import concept03 from '~/assets/images/SE DÉSHABILLER/concept/03 First Section_POEM.webp';
import concept04 from '~/assets/images/SE DÉSHABILLER/concept/04 First Section_COLOR STORY 1.webp';
import concept05 from '~/assets/images/SE DÉSHABILLER/concept/05 First Section_COLOR STORY 2.webp';
import concept06 from '~/assets/images/SE DÉSHABILLER/concept/06 First Section_FABRIC CHART 1.webp';
import concept07 from '~/assets/images/SE DÉSHABILLER/concept/07 First Section_FABRIC CHART 2.webp';
import concept08 from '~/assets/images/SE DÉSHABILLER/concept/08 Page 1.webp';
import concept09 from '~/assets/images/SE DÉSHABILLER/concept/09 Page 2.webp';
import concept10 from '~/assets/images/SE DÉSHABILLER/concept/10 Page 3.webp';
import concept11 from '~/assets/images/SE DÉSHABILLER/concept/11 Page 4.webp';
import concept12 from '~/assets/images/SE DÉSHABILLER/concept/12 Page 5.webp';
import concept13 from '~/assets/images/SE DÉSHABILLER/concept/13 Page 6.webp';
import concept14 from '~/assets/images/SE DÉSHABILLER/concept/14 Page 7.webp';
import concept15 from '~/assets/images/SE DÉSHABILLER/concept/15 Page 8.webp';
import concept16 from '~/assets/images/SE DÉSHABILLER/concept/16 Page 9.webp';
import concept17 from '~/assets/images/SE DÉSHABILLER/concept/17 Page 10.webp';
import concept18 from '~/assets/images/SE DÉSHABILLER/concept/18 Page 11.webp';
import concept19 from '~/assets/images/SE DÉSHABILLER/concept/19 Page 12.webp';
import concept20 from '~/assets/images/SE DÉSHABILLER/concept/20 Page 13.webp';
import concept21 from '~/assets/images/SE DÉSHABILLER/concept/21 Page 14.webp';
import concept22 from '~/assets/images/SE DÉSHABILLER/concept/22 Page 15.webp';
import concept23 from '~/assets/images/SE DÉSHABILLER/concept/23 Page 16.webp';
import concept24 from '~/assets/images/SE DÉSHABILLER/concept/24 Page 17.webp';
import concept25 from '~/assets/images/SE DÉSHABILLER/concept/25 Page 18.webp';

const metadata = {
  title: 'SE DÉSHABILLER',
};

const flipbookImages = [
  concept01.src,
  concept02.src,
  concept03.src,
  concept04.src,
  concept05.src,
  concept06.src,
  concept07.src,
  concept08.src,
  concept09.src,
  concept10.src,
  concept11.src,
  concept12.src,
  concept13.src,
  concept14.src,
  concept15.src,
  concept16.src,
  concept17.src,
  concept18.src,
  concept19.src,
  concept20.src,
  concept21.src,
  concept22.src,
  concept23.src,
  concept24.src,
  concept25.src,
];
const galleryImages = [flatFinal01.src, flatFinal02.src, flatFinal03.src, flatFinal04.src, flatFinal05.src];
const journalImages = [
  journal01.src,
  journal02.src,
  journal03.src,
  journal04.src,
  journal05.src,
  journal06.src,
  journal07.src,
  journal08.src,
  journal09.src,
  journal10.src,
  journal11.src,
  journal12.src,
  journal13.src,
  journal14.src,
  journal15.src,
  journal16.src,
  journal17.src,
  journal18.src,
  journal19.src,
  journal20.src,
  journal21.src,
  journal22.src,
  journal23.src,
  journal24.src,
  journal25.src,
  journal26.src,
  journal27.src,
  journal28.src,
  journal29.src,
  journal30.src,
  journal31.src,
  journal32.src,
  journal33.src,
  journal34.src,
  journal35.src,
  journal36.src,
  journal37.src,
  journal38.src,
  journal39.src,
  journal40.src,
  journal41.src,
  journal42.src,
  journal43.src,
  journal44.src,
  journal45.src,
  journal46.src,
  journal47.src,
  journal48.src,
  journal49.src,
  journal50.src,
  journal51.src,
  journal52.src,
  journal53.src,
  journal54.src,
  journal55.src,
  journal56.src,
  journal57.src,
  journal58.src,
];
---

<Layout metadata={metadata}>
  <div class="relative">
    <!-- Full Width Cover Image - Fixed Background -->
    <div class="fixed top-[88px] md:top-[140px] left-0 w-full h-[500px] overflow-hidden z-[5]">
      <img src={coverImage.src} alt="SE DÉSHABILLER Cover" class="w-full h-full object-cover block" />
    </div>

    <!-- Spacer to push content down -->
    <div class="h-[500px]"></div>

    <!-- Content that scrolls over the cover image -->
    <div class="relative bg-white z-10">
      <!-- Back to Works Button -->
      <div class="pt-4 pb-8 pl-4 md:pl-10">
        <a
          href="/works"
          class="inline-flex items-center gap-2 text-black hover:opacity-70 transition-opacity uppercase tracking-wide text-sm"
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M19 12H5M12 19l-7-7 7-7"></path>
          </svg>
          Back to Works
        </a>
      </div>

      <!-- Content Section: Image Left, Text Right -->
      <div
        class="content-section flex items-center justify-center gap-10 px-5 py-16 max-w-6xl mx-auto flex-wrap md:flex-nowrap"
      >
        <div class="image-container max-w-[500px] w-full h-[500px] overflow-hidden flex items-center justify-center">
          <img
            src={definitionImage.src}
            alt="SE DÉSHABILLER Definition"
            class="w-full h-full object-cover object-center block"
          />
        </div>

        <div class="text-container max-w-[500px] w-full">
          <h3 class="font-extralight text-center mb-5 text-2xl">SE DÉSHABILLER</h3>
          <p class="leading-relaxed" style="font-size: 17px;">
            Se Déshabiller is a conceptual collection that explores the dichotomy of dressing and undressing—balancing
            the softness of anticipation with the structure of confidence. It delves into the excitement of putting on
            an outfit that empowers and exudes sensuality, while also embracing the thrill of taking it off, feeling
            equally confident. Rooted in themes of elegance, intimacy, and metropolitan sophistication, this project
            showcases my ability to craft a complete creative vision, from ideation and color theory to fabric
            selection, final illustrations, and visual direction. While not fully realized, the designs represent a
            comprehensive approach to creative direction and collection building.
          </p>
        </div>
      </div>

      <!-- Lightbox Section -->
      <div class="lightbox-section w-full bg-black py-16 px-5 flex justify-center items-center gap-5 flex-wrap">
        {
          [page12, page34].map((image, index) => (
            <img
              src={image.src}
              alt={`Page ${index + 1}`}
              class="lightbox-thumbnail max-w-[45%] md:max-w-[45%] sm:max-w-[90%] h-auto cursor-pointer transition-opacity duration-300 hover:opacity-80"
              data-lightbox-image={image.src}
            />
          ))
        }
      </div>

      <!-- Flipbook Section -->
      <div class="pt-16">
        <FlipBookTurnJS images={flipbookImages} />
      </div>

      <!-- Download Portfolio Button -->
      <div class="w-full flex justify-center pt-2 pb-4">
        <a
          href="/Claire-Pardington-Project-Portfolio-2024-reduced.pdf"
          download
          class="px-8 py-3 bg-black text-white uppercase tracking-wide text-sm hover:bg-gray-800 transition-colors"
        >
          Download Portfolio
        </a>
      </div>

      <!-- Scrollable Gallery -->
      <div class="w-full py-16 overflow-hidden">
        <h2 class="text-2xl md:text-3xl uppercase tracking-wide text-center mb-8" style="font-weight: 200;">Design</h2>

        <!-- Scrollable Image Container -->
        <div
          class="overflow-x-auto overflow-y-hidden scrollbar-hide -mx-4 image-gallery-scroll"
          style="touch-action: pan-x; cursor: grab; -webkit-overflow-scrolling: touch;"
        >
          <div class="flex gap-4" style="width: max-content; padding-left: 1.25rem; padding-right: 1.25rem;">
            {
              galleryImages.map((image, index) => (
                <div
                  class="flex-shrink-0 gallery-item"
                  data-lightbox={`lightbox-${index}`}
                  style="height: 400px; cursor: grab;"
                >
                  <img
                    src={image}
                    alt={`SE DÉSHABILLER Gallery ${index + 1}`}
                    style="height: 400px; width: auto; object-fit: cover; pointer-events: none; user-select: none;"
                  />
                </div>
              ))
            }
          </div>
        </div>

        <p class="text-center text-sm uppercase tracking-wide mt-6">[Swipe to View Portfolio]</p>
      </div>

      <!-- Journal Scrollable Gallery -->
      <div class="w-full py-16 overflow-hidden">
        <h2 class="text-2xl md:text-3xl uppercase tracking-wide text-center mb-8" style="font-weight: 200;">
          SE DÉSHABILLER DESIGN JOURNAL
        </h2>

        <!-- Scrollable Image Container -->
        <div
          class="overflow-x-auto overflow-y-hidden scrollbar-hide -mx-4 journal-gallery-scroll"
          style="touch-action: pan-x; cursor: grab; -webkit-overflow-scrolling: touch;"
        >
          <div class="flex gap-4" style="width: max-content; padding-left: 1.25rem; padding-right: 1.25rem;">
            {
              journalImages.map((image, index) => (
                <div
                  class="flex-shrink-0 journal-item"
                  data-lightbox={`journal-lightbox-${index}`}
                  style="height: 400px; cursor: grab;"
                >
                  <img
                    src={image}
                    alt={`SE DÉSHABILLER Journal ${index + 1}`}
                    style="height: 400px; width: auto; object-fit: cover; pointer-events: none; user-select: none;"
                  />
                </div>
              ))
            }
          </div>
        </div>

        <p class="text-center text-sm uppercase tracking-wide mt-6">[Swipe to View Journal]</p>
      </div>

      <!-- View Full Portfolio Link -->
      <div class="w-full flex justify-center pt-4 pb-[100px]">
        <a
          href="/se-deshabiller-portfolio"
          class="inline-flex items-center gap-2 text-black hover:opacity-70 transition-opacity uppercase tracking-wide text-sm underline"
        >
          View Full Complete Portfolio
        </a>
      </div>

      <!-- Lightbox Modals -->
      {
        galleryImages.map((image, index) => (
          <div
            id={`lightbox-${index}`}
            class="hidden fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4"
            onclick={`document.getElementById('lightbox-${index}').classList.add('hidden')`}
          >
            <img
              src={image}
              alt={`SE DÉSHABILLER Gallery ${index + 1}`}
              style="max-height: 80vh; max-width: 100%; width: auto; height: auto; object-fit: contain;"
            />
          </div>
        ))
      }

      <!-- Journal Lightbox Modals -->
      {
        journalImages.map((image, index) => (
          <div
            id={`journal-lightbox-${index}`}
            class="hidden fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4"
            onclick={`document.getElementById('journal-lightbox-${index}').classList.add('hidden')`}
          >
            <img
              src={image}
              alt={`SE DÉSHABILLER Journal ${index + 1}`}
              style="max-height: 80vh; max-width: 100%; width: auto; height: auto; object-fit: contain;"
            />
          </div>
        ))
      }

      <!-- Lightbox Overlay -->
      <div class="lightbox-overlay" id="lightboxOverlay">
        <button class="lightbox-close" id="lightboxClose">×</button>
        <img src="" alt="Lightbox" id="lightboxImage" class="lightbox-image" />
      </div>
    </div>
  </div>
</Layout>

<script is:inline src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script is:inline src="/turn.min.js"></script>

<style>
  /* Hide flipbook pages until turn.js initializes */
  #flipbook .page {
    display: none;
  }

  #flipbook.turn-initialized .page {
    display: flex !important;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .lightbox-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.95);
    z-index: 1000;
    justify-content: center;
    align-items: center;
    padding: 20px;
  }

  .lightbox-overlay.open {
    display: flex;
  }

  .lightbox-image {
    max-width: 90%;
    max-height: 90%;
    object-fit: contain;
  }

  .lightbox-close {
    position: absolute;
    top: 20px;
    right: 20px;
    background: rgba(255, 255, 255, 0.3);
    border: none;
    color: white;
    font-size: 30px;
    width: 50px;
    height: 50px;
    cursor: pointer;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.3s ease;
  }

  .lightbox-close:hover {
    background: rgba(255, 255, 255, 0.5);
  }

  @media (max-width: 768px) {
    .content-section {
      flex-direction: column;
    }
  }
</style>

<script>
  document.addEventListener('astro:page-load', () => {
    // Lightbox functionality for page images
    const lightboxThumbnails = document.querySelectorAll('.lightbox-thumbnail');
    const lightboxOverlay = document.getElementById('lightboxOverlay');
    const lightboxImage = document.getElementById('lightboxImage') as HTMLImageElement;
    const lightboxClose = document.getElementById('lightboxClose');

    lightboxThumbnails.forEach((thumbnail) => {
      thumbnail.addEventListener('click', (e) => {
        const target = e.target as HTMLElement;
        const imageSrc = target.dataset.lightboxImage || target.getAttribute('src');
        if (imageSrc && lightboxImage && lightboxOverlay) {
          lightboxImage.src = imageSrc;
          lightboxOverlay.classList.add('open');
        }
      });
    });

    lightboxClose?.addEventListener('click', () => {
      lightboxOverlay?.classList.remove('open');
    });

    lightboxOverlay?.addEventListener('click', (e) => {
      if (e.target === lightboxOverlay) {
        lightboxOverlay.classList.remove('open');
      }
    });

    // Horizontal scrollable gallery - Design
    const slider = document.querySelector('.image-gallery-scroll') as HTMLElement | null;

    // Horizontal scrollable gallery - Journal
    const journalSlider = document.querySelector('.journal-gallery-scroll') as HTMLElement | null;

    if (slider) {
      let isDown = false;
      let startX: number = 0;
      let scrollLeft: number = 0;
      let hasMoved = false;

      slider.addEventListener('mousedown', (e: MouseEvent) => {
        isDown = true;
        hasMoved = false;
        slider.style.cursor = 'grabbing';
        startX = e.pageX - slider.offsetLeft;
        scrollLeft = slider.scrollLeft;
      });

      slider.addEventListener('mouseleave', () => {
        isDown = false;
        slider.style.cursor = 'grab';
      });

      slider.addEventListener('mouseup', (e: MouseEvent) => {
        isDown = false;
        slider.style.cursor = 'grab';

        // Only open lightbox if we didn't drag
        if (!hasMoved && e.target) {
          const item = (e.target as HTMLElement).closest('.gallery-item') as HTMLElement | null;
          if (item && item.dataset.lightbox) {
            const lightboxId = item.dataset.lightbox;
            const lightbox = document.getElementById(lightboxId);
            if (lightbox) {
              lightbox.classList.remove('hidden');
            }
          }
        }

        hasMoved = false;
      });

      slider.addEventListener('mousemove', (e: MouseEvent) => {
        if (!isDown) return;
        e.preventDefault();
        hasMoved = true;
        const x = e.pageX - slider.offsetLeft;
        const walk = (x - startX) * 2;
        slider.scrollLeft = scrollLeft - walk;
      });

      // Click handler for gallery items
      document.querySelectorAll('.gallery-item').forEach((item) => {
        item.addEventListener('click', () => {
          if (!hasMoved) {
            const lightboxId = (item as HTMLElement).dataset.lightbox;
            if (lightboxId) {
              const lightbox = document.getElementById(lightboxId);
              if (lightbox) {
                lightbox.classList.remove('hidden');
              }
            }
          }
        });
      });
    }

    // Journal gallery scroll functionality
    if (journalSlider) {
      let journalIsDown = false;
      let journalStartX: number = 0;
      let journalScrollLeft: number = 0;
      let journalHasMoved = false;

      journalSlider.addEventListener('mousedown', (e: MouseEvent) => {
        journalIsDown = true;
        journalHasMoved = false;
        journalSlider.style.cursor = 'grabbing';
        journalStartX = e.pageX - journalSlider.offsetLeft;
        journalScrollLeft = journalSlider.scrollLeft;
      });

      journalSlider.addEventListener('mouseleave', () => {
        journalIsDown = false;
        journalSlider.style.cursor = 'grab';
      });

      journalSlider.addEventListener('mouseup', (e: MouseEvent) => {
        journalIsDown = false;
        journalSlider.style.cursor = 'grab';

        if (!journalHasMoved && e.target) {
          const item = (e.target as HTMLElement).closest('.journal-item') as HTMLElement | null;
          if (item && item.dataset.lightbox) {
            const lightboxId = item.dataset.lightbox;
            const lightbox = document.getElementById(lightboxId);
            if (lightbox) {
              lightbox.classList.remove('hidden');
            }
          }
        }

        journalHasMoved = false;
      });

      journalSlider.addEventListener('mousemove', (e: MouseEvent) => {
        if (!journalIsDown) return;
        e.preventDefault();
        journalHasMoved = true;
        const x = e.pageX - journalSlider.offsetLeft;
        const walk = (x - journalStartX) * 2;
        journalSlider.scrollLeft = journalScrollLeft - walk;
      });

      document.querySelectorAll('.journal-item').forEach((item) => {
        item.addEventListener('click', () => {
          if (!journalHasMoved) {
            const lightboxId = (item as HTMLElement).dataset.lightbox;
            if (lightboxId) {
              const lightbox = document.getElementById(lightboxId);
              if (lightbox) {
                lightbox.classList.remove('hidden');
              }
            }
          }
        });
      });
    }
  });
</script>
